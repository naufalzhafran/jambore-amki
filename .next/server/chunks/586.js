exports.id=586,exports.ids=[586],exports.modules={2134:(e,a,t)=>{Promise.resolve().then(t.bind(t,1343)),Promise.resolve().then(t.bind(t,5841))},1343:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>ideaedit});var s=t(80),i=t(9885),l=t(9275),r=t.n(l),n=t(9307),d=t(5465),c=t(5537),o=t(9803),u=t(87),g=t(7114),m=t(9957),p=t(6601),h=t(1712),x=t(3385),f=t(2026);let j=i.forwardRef(({className:e,...a},t)=>s.jsx("textarea",{className:(0,h.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...a}));j.displayName="Textarea";let ideaimguploader=({toastFn:e,files:a,setFiles:t,imagesUrl:l})=>{let[r,n]=(0,i.useState)(0);return(0,s.jsxs)("div",{className:(0,h.cn)("flex justify-center flex-col items-center gap-4 p-6 rounded"),children:[a.length?s.jsx("img",{className:"w-full rounded-md",src:URL.createObjectURL(a[r]),alt:"idea"}):l&&l.length?s.jsx("img",{className:"w-full rounded-md",src:l[0],alt:"idea"}):null,s.jsx("div",{className:(0,h.cn)("flex items-center justify-center w-full h-full"),children:(0,s.jsxs)("label",{className:"flex cursor-pointer flex-col w-full h-full border-2 rounded-md border-dashed hover:bg-gray-100 hover:border-gray-300",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center pt-7",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-12 h-12 text-gray-400 group-hover:text-gray-600",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),(0,s.jsxs)("p",{className:"pt-1 text-sm tracking-wider text-gray-400 group-hover:text-gray-600",children:[a.length?"Ganti":"Upload"," Foto"]})]}),s.jsx("input",{type:"file",onChange:a=>{if(a.target?.files){let s=a.target.files;for(let a=0;a<s.length;a++){let i=s[a].type,l=["image/gif","image/jpeg","image/png"];l.includes(i)?t([s[0]]):e({variant:"destructive",title:"Error",description:"Only images accepted"})}}},className:"opacity-0",multiple:!0,name:"files[]"})]})})]})};var b=t(2038),v=t(2308),w=t(1973),k=t(1440),y=t.n(k);let N=r()(()=>Promise.all([t.e(330),t.e(168),t.e(813),t.e(368)]).then(t.bind(t,1368)),{loadableGenerated:{modules:["/Users/naufalzhafran/Documents/2023/Salman Digital Lab/jambore-amki/src/components/containers/ideaedit.tsx -> ../ui/rich-editor"]},ssr:!1}),ideaedit=({userId:e})=>{let[a,t]=(0,i.useState)(""),[l,r]=(0,i.useState)(""),[k,S]=(0,i.useState)(""),[I,P]=(0,i.useState)(""),[Z,U]=(0,i.useState)([]),[D,C]=(0,i.useState)(""),R=(0,i.useRef)(null),T=(0,g.useParams)(),G=(0,g.useRouter)(),{toast:L}=(0,b.pm)(),{trigger:_,isMutating:F}=(0,n.Z)("/idea/create",v.S$),{trigger:K,isMutating:O}=(0,n.Z)("/idea/update",v.V2),{isLoading:B}=(0,d.ZP)(T.slug?{arg:{record_id:T.slug}}:null,v.nl,{onSuccess:e=>{r(e.title),t(e.description),R.current?.setMarkdown(e.description),S(e.abstract),P(e.images[0]),C(e.images.length?w.Z.files.getUrl(e,e.images[0]):"")},onError:e=>{e instanceof c.Ug?L({variant:"destructive",title:"Terjadi Kesalahan",description:JSON.stringify(e.response,null,2)}):L({variant:"destructive",title:"Terjadi Kesalahan",description:"Tolong coba lagi setelah beberapa saat."})}}),handleSubmit=async()=>{if(k.length>450){L({variant:"destructive",title:"Terjadi Kesalahan",description:"Abstrak tidak boleh lebih dari 450 karakter."});return}let t=new FormData;t.append("title",l),t.append("abstract",k),t.append("description",a),t.append("user",e),Z.length&&(t.append("images",Z[0]),T.slug&&t.append("images-",I));try{T.slug?await K({record_id:T.slug,data:t}):await _({data:t}),L({title:"Berhasil",description:T.slug?"Ide anda berhasil diubah":"Ide anda berhasil didaftarkan"}),setTimeout(()=>G.push("/profile/ideas"),500)}catch(e){e instanceof c.Ug?L({variant:"destructive",title:"Terjadi Kesalahan",description:JSON.stringify(e.response,null,2)}):L({variant:"destructive",title:"Terjadi Kesalahan",description:"Tolong coba lagi setelah beberapa saat."})}};return(0,s.jsxs)("main",{className:(0,h.cn)("flex flex-col items-center justify-center min-h-[calc(100vh-80px)]"),children:[s.jsx("div",{className:"w-full h-fit md:max-w-2xl",children:s.jsx(m.Button,{asChild:!0,variant:"outline",className:"my-2",children:(0,s.jsxs)(y(),{href:"/profile/ideas",children:[s.jsx(o.Z,{})," Back"]})})}),(0,s.jsxs)(p.Zb,{className:(0,h.cn)("w-full h-fit md:max-w-2xl"),children:[s.jsx(p.Ol,{children:s.jsx(p.ll,{children:"Deskripsikan Ide Anda"})}),s.jsx(ideaimguploader,{toastFn:L,files:Z,imagesUrl:D?[D]:[],setFiles:U}),(0,s.jsxs)(p.aY,{children:[(0,s.jsxs)("div",{className:"w-full items-center gap-1.5",children:[s.jsx(x._,{htmlFor:"title",children:"Judul"}),s.jsx(f.I,{id:"title",placeholder:"Judul",value:l,onChange:e=>r(e.target.value)})]}),(0,s.jsxs)("div",{className:"w-full items-center gap-1.5",children:[s.jsx(x._,{htmlFor:"abstract",children:"Abstrak/Rangkuman"}),s.jsx(j,{id:"abstract",value:k,placeholder:"Maksimal 450 karakter",onChange:e=>S(e.target.value)}),(0,s.jsxs)("p",{className:"p-1 text-xs text-right",children:[k.length,"/450 Karakter"]})]}),s.jsx(i.Suspense,{fallback:s.jsx("div",{}),children:(0,s.jsxs)("div",{className:"w-full items-center gap-1.5",children:[s.jsx(x._,{children:"Deskripsi Panjang"}),s.jsx(N,{markdown:a,editorRef:R,onChange:e=>t(e)})]})})]}),s.jsx(p.eW,{children:(0,s.jsxs)(m.Button,{onClick:e=>{e.preventDefault(),handleSubmit()},children:[F??s.jsx(u.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Submit Idea"]})})]})]})}},2308:(e,a,t)=>{"use strict";t.d(a,{Gk:()=>GetListIdeas,S$:()=>PostCreateIdeas,V2:()=>PostUpdateIdeas,nl:()=>GetIdeaDetail});var s=t(1973);let PostCreateIdeas=async(e,{arg:a})=>await s.Z.collection("ideas").create(a.data),PostUpdateIdeas=async(e,{arg:a})=>await s.Z.collection("ideas").update(a.record_id,a.data),GetListIdeas=({arg:e})=>s.Z.collection("ideas").getList(e.page,e.perPage,e.options),GetIdeaDetail=({arg:e})=>s.Z.collection("ideas").getOne(e.record_id,{expand:"user"})},7588:(e,a,t)=>{"use strict";t.d(a,{ZP:()=>d});var s=t(7536);let i=(0,s.createProxy)(String.raw`/Users/naufalzhafran/Documents/2023/Salman Digital Lab/jambore-amki/src/components/containers/ideaedit.tsx`),{__esModule:l,$$typeof:r}=i,n=i.default,d=n}};