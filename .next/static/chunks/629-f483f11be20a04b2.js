(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[629],{6264:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var a=r(2898);let n=(0,a.Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},629:function(e,t,r){Promise.resolve().then(r.bind(r,9640)),Promise.resolve().then(r.bind(r,3386))},415:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return dynamic}});let a=r(1024);r(2265);let n=a._(r(54));function convertModule(e){return{default:(null==e?void 0:e.default)||e}}function dynamic(e,t){let r=n.default,a={loading:e=>{let{error:t,isLoading:r,pastDelay:a}=e;return null}};"function"==typeof e&&(a.loader=e),Object.assign(a,t);let l=a.loader;return r({...a,loader:()=>null!=l?l().then(convertModule):Promise.resolve(convertModule(()=>null))})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3388:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{suspense:function(){return suspense},NoSSR:function(){return NoSSR}}),r(1024),r(2265);let a=r(4922);function suspense(){let e=Error(a.NEXT_DYNAMIC_NO_SSR_CODE);throw e.digest=a.NEXT_DYNAMIC_NO_SSR_CODE,e}function NoSSR(e){let{children:t}=e;return t}},54:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return _default}});let a=r(1024),n=a._(r(2265)),l=r(3388),_default=function(e){let t=Object.assign({loader:null,loading:null,ssr:!0},e);function LoadableComponent(e){let r=t.loading,a=n.default.createElement(r,{isLoading:!0,pastDelay:!0,error:null}),i=t.ssr?n.default.Fragment:l.NoSSR,s=t.lazy;return n.default.createElement(n.default.Suspense,{fallback:a},n.default.createElement(i,null,n.default.createElement(s,e)))}return t.lazy=n.default.lazy(t.loader),LoadableComponent.displayName="LoadableComponent",LoadableComponent}},9640:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ideaedit}});var a=r(7437),n=r(2265),l=r(415),i=r.n(l),s=r(3068),u=r(713),d=r(6172),o=r(2898);let c=(0,o.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var f=r(6264),p=r(4033),g=r(8700),m=r(5431),h=r(992),x=r(7177),b=r(7832);let v=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("textarea",{className:(0,h.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...n})});v.displayName="Textarea";var ideaimguploader=e=>{let{toastFn:t,files:r,setFiles:l,imagesUrl:i}=e,[s,u]=(0,n.useState)(0);return(0,a.jsxs)("div",{className:(0,h.cn)("flex justify-center flex-col items-center gap-4 p-6 rounded"),children:[r.length?(0,a.jsx)("img",{className:"w-full rounded-md",src:URL.createObjectURL(r[s]),alt:"idea"}):i&&i.length?(0,a.jsx)("img",{className:"w-full rounded-md",src:i[0],alt:"idea"}):null,(0,a.jsx)("div",{className:(0,h.cn)("flex items-center justify-center w-full h-full"),children:(0,a.jsxs)("label",{className:"flex cursor-pointer flex-col w-full h-full border-2 rounded-md border-dashed hover:bg-gray-100 hover:border-gray-300",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center pt-7",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-12 h-12 text-gray-400 group-hover:text-gray-600",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),(0,a.jsxs)("p",{className:"pt-1 text-sm tracking-wider text-gray-400 group-hover:text-gray-600",children:[r.length?"Ganti":"Upload"," Foto"]})]}),(0,a.jsx)("input",{type:"file",onChange:e=>{var r;if(null===(r=e.target)||void 0===r?void 0:r.files){let r=e.target.files;for(let e=0;e<r.length;e++){let a=r[e].type,n=["image/gif","image/jpeg","image/png"];n.includes(a)?l([r[0]]):t({variant:"destructive",title:"Error",description:"Only images accepted"})}}},className:"opacity-0",multiple:!0,name:"files[]"})]})})]})},j=r(3839),y=r(5160),w=r(6212),N=r(1396),k=r.n(N);let _=i()(()=>Promise.all([r.e(880),r.e(543)]).then(r.bind(r,7543)),{loadableGenerated:{webpack:()=>[7543]},ssr:!1});var ideaedit=e=>{let{userId:t}=e,[r,l]=(0,n.useState)(""),[i,o]=(0,n.useState)(""),[N,S]=(0,n.useState)(""),[C,R]=(0,n.useState)(""),[M,O]=(0,n.useState)([]),[P,E]=(0,n.useState)(""),I=(0,n.useRef)(null),D=(0,p.useParams)(),Z=(0,p.useRouter)(),{toast:L}=(0,j.pm)(),{trigger:T,isMutating:U}=(0,s.Z)("/idea/create",y.S$),{trigger:F,isMutating:z}=(0,s.Z)("/idea/update",y.V2),{isLoading:G}=(0,u.ZP)(D.slug?{arg:{record_id:D.slug}}:null,y.nl,{onSuccess:e=>{var t;o(e.title),l(e.description),null===(t=I.current)||void 0===t||t.setMarkdown(e.description),S(e.abstract),R(e.images[0]),E(e.images.length?w.Z.files.getUrl(e,e.images[0]):"")},onError:e=>{e instanceof d.Ug?L({variant:"destructive",title:"Terjadi Kesalahan",description:JSON.stringify(e.response,null,2)}):L({variant:"destructive",title:"Terjadi Kesalahan",description:"Tolong coba lagi setelah beberapa saat."})}}),handleSubmit=async()=>{if(N.length>450){L({variant:"destructive",title:"Terjadi Kesalahan",description:"Abstrak tidak boleh lebih dari 450 karakter."});return}let e=new FormData;e.append("title",i),e.append("abstract",N),e.append("description",r),e.append("user",t),M.length&&(e.append("images",M[0]),D.slug&&e.append("images-",C));try{D.slug?await F({record_id:D.slug,data:e}):await T({data:e}),L({title:"Berhasil",description:D.slug?"Ide anda berhasil diubah":"Ide anda berhasil didaftarkan"}),setTimeout(()=>Z.push("/profile/ideas"),500)}catch(e){e instanceof d.Ug?L({variant:"destructive",title:"Terjadi Kesalahan",description:JSON.stringify(e.response,null,2)}):L({variant:"destructive",title:"Terjadi Kesalahan",description:"Tolong coba lagi setelah beberapa saat."})}};return(0,a.jsxs)("main",{className:(0,h.cn)("flex flex-col items-center justify-center min-h-[calc(100vh-80px)]"),children:[(0,a.jsx)("div",{className:"w-full h-fit md:max-w-2xl",children:(0,a.jsx)(g.Button,{asChild:!0,variant:"outline",className:"my-2",children:(0,a.jsxs)(k(),{href:"/profile/ideas",children:[(0,a.jsx)(c,{})," Back"]})})}),(0,a.jsxs)(m.Zb,{className:(0,h.cn)("w-full h-fit md:max-w-2xl"),children:[(0,a.jsx)(m.Ol,{children:(0,a.jsx)(m.ll,{children:"Deskripsikan Ide Anda"})}),(0,a.jsx)(ideaimguploader,{toastFn:L,files:M,imagesUrl:P?[P]:[],setFiles:O}),(0,a.jsxs)(m.aY,{children:[(0,a.jsxs)("div",{className:"w-full items-center gap-1.5",children:[(0,a.jsx)(x._,{htmlFor:"title",children:"Judul"}),(0,a.jsx)(b.I,{id:"title",placeholder:"Judul",value:i,onChange:e=>o(e.target.value)})]}),(0,a.jsxs)("div",{className:"w-full items-center gap-1.5",children:[(0,a.jsx)(x._,{htmlFor:"abstract",children:"Abstrak/Rangkuman"}),(0,a.jsx)(v,{id:"abstract",value:N,placeholder:"Maksimal 450 karakter",onChange:e=>S(e.target.value)}),(0,a.jsxs)("p",{className:"p-1 text-xs text-right",children:[N.length,"/450 Karakter"]})]}),(0,a.jsx)(n.Suspense,{fallback:(0,a.jsx)("div",{}),children:(0,a.jsxs)("div",{className:"w-full items-center gap-1.5",children:[(0,a.jsx)(x._,{children:"Deskripsi Panjang"}),(0,a.jsx)(_,{markdown:r,editorRef:I,onChange:e=>l(e)})]})})]}),(0,a.jsx)(m.eW,{children:(0,a.jsxs)(g.Button,{onClick:e=>{e.preventDefault(),handleSubmit()},children:[null!=U?U:(0,a.jsx)(f.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Submit Idea"]})})]})]})}},5431:function(e,t,r){"use strict";r.d(t,{Ol:function(){return s},SZ:function(){return d},Zb:function(){return i},aY:function(){return o},eW:function(){return c},ll:function(){return u}});var a=r(7437),n=r(2265),l=r(992);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});i.displayName="Card";let s=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...n})});s.displayName="CardHeader";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});u.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...n})});d.displayName="CardDescription";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",r),...n})});o.displayName="CardContent";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",r),...n})});c.displayName="CardFooter"},7832:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var a=r(7437),n=r(2265),l=r(992);let i=n.forwardRef((e,t)=>{let{className:r,type:n,...i}=e;return(0,a.jsx)("input",{type:n,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},7177:function(e,t,r){"use strict";r.d(t,{_:function(){return d}});var a=r(7437),n=r(2265),l=r(6743),i=r(6061),s=r(992);let u=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(l.f,{ref:t,className:(0,s.cn)(u(),r),...n})});d.displayName=l.f.displayName},5160:function(e,t,r){"use strict";r.d(t,{Gk:function(){return GetListIdeas},S$:function(){return PostCreateIdeas},V2:function(){return PostUpdateIdeas},nl:function(){return GetIdeaDetail}});var a=r(6212);let PostCreateIdeas=async(e,t)=>{let{arg:r}=t;return await a.Z.collection("ideas").create(r.data)},PostUpdateIdeas=async(e,t)=>{let{arg:r}=t;return await a.Z.collection("ideas").update(r.record_id,r.data)},GetListIdeas=e=>{let{arg:t}=e;return a.Z.collection("ideas").getList(t.page,t.perPage,t.options)},GetIdeaDetail=e=>{let{arg:t}=e;return a.Z.collection("ideas").getOne(t.record_id,{expand:"user"})}},6743:function(e,t,r){"use strict";r.d(t,{f:function(){return s}});var a=r(3428),n=r(2265),l=r(9381);let i=(0,n.forwardRef)((e,t)=>(0,n.createElement)(l.WV.label,(0,a.Z)({},e,{ref:t,onMouseDown:t=>{var r;null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault()}}))),s=i},3068:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2265),n=r(713),l=r(4796);let i=l.w6?e=>{e()}:a.startTransition,useStateWithDeps=e=>{let[,t]=(0,a.useState)({}),r=(0,a.useRef)(!1),n=(0,a.useRef)(e),i=(0,a.useRef)({data:!1,error:!1,isValidating:!1}),s=(0,a.useCallback)(e=>{let a=!1,l=n.current;for(let t in e)l[t]!==e[t]&&(l[t]=e[t],i.current[t]&&(a=!0));a&&!r.current&&t({})},[]);return(0,l.LI)(()=>(r.current=!1,()=>{r.current=!0})),[n,i.current,s]},s=(0,l.xD)(n.ZP,()=>(e,t,r={})=>{let{mutate:s}=(0,n.kY)(),u=(0,a.useRef)(e),d=(0,a.useRef)(t),o=(0,a.useRef)(r),c=(0,a.useRef)(0),[f,p,g]=useStateWithDeps({data:l.i_,error:l.i_,isMutating:!1}),m=f.current,h=(0,a.useCallback)(async(e,t)=>{var r,a;let[n,f]=(0,l.qC)(u.current);if(!d.current)throw Error("Can’t trigger the mutation: missing fetcher.");if(!n)throw Error("Can’t trigger the mutation: missing key.");let p=(0,l.PM)((0,l.PM)({populateCache:!1,throwOnError:!0},o.current),t),m=(0,l.u3)();c.current=m,g({isMutating:!0});try{let t=await s(n,d.current(f,{arg:e}),(0,l.PM)(p,{throwOnError:!0}));return c.current<=m&&(i(()=>g({data:t,isMutating:!1,error:void 0})),null==(r=p.onSuccess)||r.call(p,t,n,p)),t}catch(e){if(c.current<=m&&(i(()=>g({error:e,isMutating:!1})),null==(a=p.onError)||a.call(p,e,n,p),p.throwOnError))throw e}},[]),x=(0,a.useCallback)(()=>{c.current=(0,l.u3)(),g({data:l.i_,error:l.i_,isMutating:!1})},[]);return(0,l.LI)(()=>{u.current=e,d.current=t,o.current=r}),{trigger:h,reset:x,get data(){return p.data=!0,m.data},get error(){return p.error=!0,m.error},get isMutating(){return p.isMutating=!0,m.isMutating}}})}}]);